
# 0x00. 关于改造

## 0x10. 改造内容

- **0x11. 为每一张表添加prototype原型表**

    为构造的每一张表添加 prototype原型表，原型表默认为null,可以代码指定集成的表。
    调用表对象时，如果成员不在对象自身中，则检索prototype表，如果prototype表中没有信息，则抛出异常。

    **解决方案**
    ----

    1. 在ScritpLexer语法分析结束后，检查是否存在[Token : prototype]字段 // ScriptLexer.cs line 935
    2. 存在即将其所指定的表格执行分析、解释并插入当前类型的propotype表中，字段查找时会自动查找该表中的内容
    3. 如过不存在则说明该表尚未继承父级

    ----

- **0x12. 为每一张表格提供一个字段 [__name__]**

    Scorpio只能输出对应的类型无法输出具体名称导致调试不便，添加默认的__name__字段，可打印输出。
    __name__字段是readonly字段，默认自动根据表名生成。

    **解决方案**
    ----

    1. 在语法分析结束后，检查对象是否已经存在__name__字段
    2. 如果存在，则抛出异常（__name__是只读字段，不用不得占用该字段）
    3. 如果不存在，则向当前表添加__name__对象，并以表名赋值

    ----

- **0x13. 修复this指针**

    修复在委托函数中指针异常的情况
